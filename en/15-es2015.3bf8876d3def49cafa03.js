(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"7wo0":function(e,o,n){"use strict";n.r(o),n.d(o,"SettingsPageModule",function(){return p});var i=n("TEn/"),t=n("tyNb"),s=n("ofXK"),r=n("3Pt+"),a=n("mrSG"),l=n("AnxF"),c=n("KN1t"),b=n("YD5U"),g=n("fXoL"),d=n("e8h1");const u=["DrawerDockingToggle"];function h(e,o){if(1&e){const e=g.Lb();g.Kb(0,"ion-select",30),g.Wb("ionChange",function(){return g.ic(e),g.Yb().logoutFromMoodle()}),g.Kb(1,"ion-select-option",31),g.oc(2,"sign out"),g.Jb(),g.Jb()}if(2&e){const e=g.Yb();g.dc("interfaceOptions",e.actionSheetOptions)}}let f=(()=>{class e{constructor(e,o,n){this.storage=e,this.moodleService=o,this.settingsModel=n,this.MOODLE_TOKEN="moodle_token",this.MOODLE_USER="moodle_user",this.actionSheetOptions={header:"Moodle"}}ngAfterViewInit(){this.drawerDockingToggle.checked=this.settingsModel.DrawerDocking}ionViewWillEnter(){return Object(a.a)(this,void 0,void 0,function*(){this.storage.ready().then(()=>Object(a.a)(this,void 0,void 0,function*(){if(yield this.isMoodleTokenPersisted()){const e=yield this.moodleService.getCalenderEventsWeek(this.persistedMoodleToken).toPromise();if(this.moodleService.containsEvents(e))return this.isSignedIn=!0,void(yield this.getMoodleUserName())}this.setLoggedOutFromMoodle()}))})}logoutFromMoodle(){return Object(a.a)(this,void 0,void 0,function*(){yield this.storage.remove(this.MOODLE_USER).then(()=>{this.storage.remove(this.MOODLE_TOKEN).then(()=>{this.setLoggedOutFromMoodle()})})})}isMoodleTokenPersisted(){return Object(a.a)(this,void 0,void 0,function*(){return yield this.storage.get(this.MOODLE_TOKEN).then(e=>(this.persistedMoodleToken=e,null!=this.persistedMoodleToken))})}setLoggedOutFromMoodle(){this.isSignedIn=!1,this.moodleUserName="No user signed in."}getMoodleUserName(){return Object(a.a)(this,void 0,void 0,function*(){yield this.storage.get(this.MOODLE_USER).then(e=>{this.moodleUserName=e})})}onDrawerDockingToggleChange(e){this.settingsModel.DrawerDocking=e.detail.checked,b.a.DrawerDocking=this.settingsModel.DrawerDocking}}return e.\u0275fac=function(o){return new(o||e)(g.Hb(d.b),g.Hb(l.a),g.Hb(c.a))},e.\u0275cmp=g.Bb({type:e,selectors:[["app-settings"]],viewQuery:function(e,o){if(1&e&&g.sc(u,!0),2&e){let e;g.fc(e=g.Xb())&&(o.drawerDockingToggle=e.first)}},decls:48,vars:3,consts:function(){let e,o,n,i,t;return e=" Settings ",o="" + "\ufffd#21\ufffd" + "Language" + "\ufffd/#21\ufffd" + "" + "\ufffd#22\ufffd" + "English" + "\ufffd/#22\ufffd" + "",n="Help",i="About",t="Drawer Docking",[e,[1,"padding"],["lines","none"],[3,"routerLink"],["slot","start"],["size","large","name","person-circle-sharp"],[3,"innerHTML"],["selected-text","","interface","action-sheet","mode","ios",3,"interfaceOptions","ionChange",4,"ngIf"],["lines","",1,"ion-padding-top","ion-margin-top"],["routerLink","language"],o,["slot","end"],["href","#"],["slot","end","color","dark","name","help-circle-outline"],n,["href","https://github.com/Studi-Guide","target","_blank"],["slot","end","color","dark","name","information-circle-outline"],i,t,[3,"ionChange"],["DrawerDockingToggle",""],[1,"ion-justify-content-center"],["size","large","name","logo-android"],["size","large","name","logo-apple"],["size","large","name","logo-tux"],["size","large","name","logo-windows"],["size","large","name","logo-firefox"],["size","large","name","logo-chrome"],["size","large","name","logo-electron"],["size","large","name","logo-ionic"],["selected-text","","interface","action-sheet","mode","ios",3,"interfaceOptions","ionChange"],["id","moodle-logout","value","sign-out","selected-text",""]]},template:function(e,o){1&e&&(g.Kb(0,"ion-header"),g.Kb(1,"ion-toolbar"),g.Kb(2,"ion-title"),g.Ob(3,0),g.Jb(),g.Jb(),g.Jb(),g.Kb(4,"ion-content"),g.Kb(5,"div",1),g.Kb(6,"ion-list-header"),g.oc(7,"Accounts"),g.Jb(),g.Kb(8,"ion-list",2),g.Kb(9,"ion-item",3),g.Kb(10,"ion-avatar",4),g.Ib(11,"ion-icon",5),g.Jb(),g.Kb(12,"ion-label"),g.Kb(13,"h3"),g.oc(14,"Moodle"),g.Jb(),g.Ib(15,"p",6),g.Jb(),g.nc(16,h,3,1,"ion-select",7),g.Jb(),g.Jb(),g.Jb(),g.Ib(17,"hr"),g.Kb(18,"ion-list",8),g.Kb(19,"ion-item",9),g.Rb(20,10),g.Ib(21,"ion-label"),g.Ib(22,"ion-note",11),g.Pb(),g.Jb(),g.Kb(23,"ion-item",12),g.Ib(24,"ion-icon",13),g.Kb(25,"ion-label"),g.Ob(26,14),g.Jb(),g.Jb(),g.Kb(27,"ion-item",15),g.Ib(28,"ion-icon",16),g.Kb(29,"ion-label"),g.Ob(30,17),g.Jb(),g.Jb(),g.Kb(31,"ion-item"),g.Ib(32,"ion-icon",16),g.Kb(33,"ion-label"),g.Ob(34,18),g.Jb(),g.Kb(35,"ion-toggle",19,20),g.Wb("ionChange",function(e){return o.onDrawerDockingToggleChange(e)}),g.Jb(),g.Jb(),g.Jb(),g.Jb(),g.Kb(37,"ion-footer"),g.Kb(38,"ion-grid"),g.Kb(39,"ion-row",21),g.Ib(40,"ion-icon",22),g.Ib(41,"ion-icon",23),g.Ib(42,"ion-icon",24),g.Ib(43,"ion-icon",25),g.Ib(44,"ion-icon",26),g.Ib(45,"ion-icon",27),g.Ib(46,"ion-icon",28),g.Ib(47,"ion-icon",29),g.Jb(),g.Jb(),g.Jb()),2&e&&(g.xb(9),g.ec("routerLink",o.isSignedIn?"/tabs/settings":"/tabs/schedule"),g.xb(6),g.dc("innerHTML",o.moodleUserName,g.jc),g.xb(1),g.dc("ngIf",o.isSignedIn))},directives:[i.v,i.V,i.T,i.p,i.C,i.B,i.y,i.cb,t.h,i.e,i.w,i.A,s.j,i.D,i.U,i.a,i.t,i.u,i.J,i.L,i.db,i.M],styles:[""]}),e})(),m=(()=>{class e{constructor(e,o){this.router=e,this.locale=o,this.languages=[{Language:"English",Identifier:"en-US"},{Language:"German",Identifier:"de"}]}ngOnInit(){console.log(this.router.url,this.locale)}SelectLanguageClick(e){console.log(e),e!==this.locale?this.router.navigate(["/"+e+this.router.url]):console.log("locale",this.locale,"not found in current URL")}}return e.\u0275fac=function(o){return new(o||e)(g.Hb(t.g),g.Hb(g.v))},e.\u0275cmp=g.Bb({type:e,selectors:[["detail-view-select-language"]],decls:11,vars:0,consts:function(){let e,o;return e="Select Language",o="" + "\ufffd#9\ufffd" + "English" + "[\ufffd/#9\ufffd|\ufffd/#10\ufffd]" + "" + "\ufffd#10\ufffd" + "German" + "[\ufffd/#9\ufffd|\ufffd/#10\ufffd]" + "",o=g.Qb(o),[["translucent",""],["slot","start"],["defaultHref","/"],e,o,["href","/en"],["href","/de"]]},template:function(e,o){1&e&&(g.Kb(0,"ion-header",0),g.Kb(1,"ion-toolbar"),g.Kb(2,"ion-buttons",1),g.Ib(3,"ion-back-button",2),g.Jb(),g.Kb(4,"ion-title"),g.Ob(5,3),g.Jb(),g.Jb(),g.Jb(),g.Kb(6,"ion-content"),g.Kb(7,"ion-list"),g.Rb(8,4),g.Ib(9,"ion-item",5),g.Ib(10,"ion-item",6),g.Pb(),g.Jb(),g.Jb())},directives:[i.v,i.V,i.i,i.f,i.g,i.T,i.p,i.B,i.y],styles:[""]}),e})(),O=(()=>{class e{}return e.\u0275mod=g.Fb({type:e}),e.\u0275inj=g.Eb({factory:function(o){return new(o||e)},imports:[[s.b,i.W]]}),e})(),p=(()=>{class e{}return e.\u0275mod=g.Fb({type:e}),e.\u0275inj=g.Eb({factory:function(o){return new(o||e)},imports:[[i.W,s.b,r.a,t.i.forChild([{path:"",component:f},{path:"language",component:m}]),O]]}),e})()}}]);