<ion-content scroll-y="false">
  <ion-progress-bar type="indeterminate" color="secondary" *ngIf="progressIsVisible"></ion-progress-bar>
  <ion-item color="">
    <ion-searchbar #discoverySearchbar search-icon="search-circle-outline" inputmode="text" mode="ios"
                   placeholder="location" color="light" [(ngModel)]="startInput"
                   (keyup.enter)="checkWhatIsRequestedByEnterKey()">
    </ion-searchbar>
    <ion-button size="default" color="medium" (click)="showFloorForSearch(discovery)" *ngIf="searchBtnIsVisible">
      <ion-icon size="large" slot="" name="search" color=""></ion-icon>
    </ion-button>
    <span class="vertical-line" *ngIf="searchBtnIsVisible"></span>
    <ion-button size="default" color="primary" (click)="showRoute()">
      <ion-icon size="large" slot="" src="/assets/navigation-svgs/directions-24px.svg"></ion-icon>
    </ion-button>
  </ion-item>
  <ion-item color="primary" *ngIf="routeInputIsVisible">
    <ion-searchbar search-icon="navigate-circle-outline" inputmode="text" mode="ios" placeholder="destination"
                   color="light" [(ngModel)]="destinationInput" (keyup.enter)="checkWhatIsRequestedByEnterKey()">
    </ion-searchbar>
    <ion-button size="default" color="primary" (click)="hideRouteSearchbar()" *ngIf="closeRouteBtnIsVisible">
      <ion-icon size="large" slot="" name="close-outline"></ion-icon>
    </ion-button>
  </ion-item>

  <div id="building-map" *ngIf="mapIsVisible">
    <svg xmlns="http://www.w3.org/2000/svg" attr.width="{{mapSvgWidth}}" attr.height="{{mapSvgHeight}}">
      <path *ngFor="let path of calculatedRoomPaths"
            attr.d="{{path.d}}"
            attr.fill="{{path.fill}}"
            stroke="#FFF"
      />
      <text *ngFor="let location of locations"
            attr.x="{{location.x}}"
            attr.y="{{location.y}}"
            font-size="9px"
            fill="#FFF">
        {{location.name}}
      </text>
      <path *ngFor="let doorLine of calculatedDoorLines" attr.d="{{doorLine.d}}" attr.stroke="{{doorLine.fill}}" />
      <!-- TEST -->
      <!-- <circle *ngFor="let pathNode of testRoute" attr.cx="{{pathNode.X}}" attr.cy="{{pathNode.Y}}" r="2" fill="red" /> -->
      <!-- TEST END -->
      <!-- route -->
      <polyline attr.points="{{calculatedRoute}}" style="fill:none;stroke:#A00;stroke-width:3" *ngIf="routeIsVisible" />
      <svg viewBox="0 0 497 497" width="18" height="30"
           attr.x="{{routeEnd.Coordinate.X-9}}"
           attr.y="{{routeEnd.Coordinate.Y-15}}"
           *ngIf="routeIsVisible">
        <path
          d="m311.286 240.324v68.297c-26.413-7.211-52.835-16.392-79.248-23.602v-68.297c26.413 7.21 52.835 16.391 79.248 23.602z"
          fill="#4f4c5f"/>
        <path
          d="m152.79 204.921v68.297c-26.413.65-52.825 7.211-79.238 23.602l-23.163-34.148 23.163-34.148c26.413-16.393 52.825-22.953 79.238-23.603z"
          fill="#4f4c5f"/>
        <path
          d="m232.038 216.722v68.297c-26.413-7.211-52.835-12.461-79.248-11.801v-68.297c26.413-.661 52.835 4.58 79.248 11.801z"
          fill="#e8e8e8"/>
        <path
          d="m232.038 148.471v68.297c-26.413-7.211-52.835-12.461-79.248-11.801v-68.297c26.413-.66 52.835 4.58 79.248 11.801z"
          fill="#4f4c5f"/>
        <path
          d="m152.79 68.307v68.297c-26.413.65-52.825 7.211-79.238 23.602l-23.163-36.896 23.163-31.401c26.413-16.391 52.825-22.952 79.238-23.602z" fill="#4f4c5f"/>
        <path
          d="m232.038 80.22v68.297c-26.413-7.211-52.835-12.461-79.248-11.801v-68.297c26.413-.66 52.835 4.58 79.248 11.801z"
          fill="#e8e8e8"/>
        <path
          d="m232.038 11.969v68.297c-26.413-7.211-52.835-12.461-79.248-11.801v-68.297c26.413-.66 52.835 4.581 79.248 11.801z"
          fill="#4f4c5f"/>
        <g fill="#e8e8e8">
          <path
            d="m152.79 136.614v68.297c-26.413.65-52.825 7.211-79.238 23.602l-23.163-36.225 23.163-32.072c26.413-16.392 52.825-22.952 79.238-23.602z"/>
          <path
            d="m152.79 0v68.297c-26.413.65-52.825 7.211-79.238 23.602l-23.163-38.033 23.163-30.264c26.413-16.391 52.825-22.952 79.238-23.602z"/>
          <path
            d="m390.524 252.125v68.297c-26.413.66-52.825-4.58-79.238-11.801v-68.297c26.413 7.211 52.825 12.461 79.238 11.801z"/>
        </g>
        <path
          d="m469.772 228.523v59.286c0 5.691-3.06 10.981-8.061 13.711-23.722 12.961-47.455 18.322-71.187 18.902v-68.297c26.423-.65 52.825-7.21 79.248-23.602z"
          fill="#4f4c5f"/>
        <path
          d="m390.524 183.847v68.297c-26.413.66-52.825-4.58-79.238-11.801v-68.297c26.413 7.21 52.825 12.461 79.238 11.801z"
          fill="#4f4c5f"/>
        <path
          d="m390.524 252.144v-68.297c26.423-.65 52.825-7.211 79.248-23.602v68.279c-26.423 16.392-52.825 22.952-79.248 23.602"
          fill="#e8e8e8"/>
        <path
          d="m390.524 183.865v-68.297c26.423-.65 52.825-7.211 79.248-23.602v68.279c-26.423 16.392-52.825 22.952-79.248 23.602"
          fill="#4f4c5f"/>
        <path
          d="m390.524 115.568v68.297c-26.413.66-52.825-4.58-79.238-11.801v-68.297c26.413 7.211 52.825 12.461 79.238 11.801z"
          fill="#e8e8e8"/>
        <path
          d="m390.524 47.289v68.297c-26.413.66-52.825-4.58-79.238-11.801v-68.297c26.413 7.211 52.825 12.462 79.238 11.801z"
          fill="#4f4c5f"/>
        <path
          d="m450.464 33.973c-19.98 8.951-39.954 12.825-59.94 13.316v68.279c26.423-.65 52.825-7.211 79.248-23.602v-45.579c0-9.932-10.244-16.475-19.308-12.414z"
          fill="#e8e8e8"/>
        <path
          d="m311.286 172.022v68.297c-26.413-7.211-52.835-16.392-79.248-23.602v-68.297c26.413 7.21 52.835 16.391 79.248 23.602z"
          fill="#e8e8e8"/>
        <path
          d="m311.286 103.72v68.297c-26.413-7.211-52.835-16.392-79.248-23.602v-68.297c26.413 7.211 52.835 16.392 79.248 23.602z"
          fill="#4f4c5f"/>
        <path
          d="m311.286 35.418v68.297c-26.413-7.211-52.835-16.392-79.248-23.602v-68.297c26.413 7.211 52.835 16.392 79.248 23.602z"
          fill="#e8e8e8"/>
        <path
          d="m50.389 262.671 23.163 34.148c9.999-6.205 19.999-11 29.998-14.6v-68.297c-9.999 3.6-19.999 8.395-29.998 14.6z"
          fill="#423e4f"/>
        <path
          d="m50.389 192.288 23.163 36.225c9.999-6.206 19.999-11 29.998-14.6v-68.297c-9.999 3.6-19.999 8.394-29.998 14.6z"
          fill="#c7c5cb"/>
        <path
          d="m50.389 123.31 23.163 36.896c9.999-6.206 19.999-11 29.998-14.6v-68.297c-9.999 3.6-19.999 8.395-29.998 14.6z"
          fill="#423e4f"/>
        <path
          d="m50.389 53.866 23.163 38.033c9.999-6.206 19.999-11 29.998-14.6v-53.688c0-4.815-.825-9.438-2.322-13.75-9.225 3.493-18.451 8.016-27.676 13.741z"
          fill="#c7c5cb"/>
      </svg>
      <svg viewBox="0 0 58 58" width="18" height="30"
           attr.x="{{startPin.Coordinate.X-9}}"
           attr.y="{{startPin.Coordinate.Y-15}}"
           *ngIf="startPinIsVisible">
        <path
          d="M40.94,5.617C37.318,1.995,32.502,0,27.38,0c-5.123,0-9.938,1.995-13.56,5.617c-6.703,6.702-7.536,19.312-1.804,26.952
	      L27.38,54.757L42.721,32.6C48.476,24.929,47.643,12.319,40.94,5.617z
	      M27.557,26c-3.859,0-7-3.141-7-7s3.141-7,7-7s7,3.141,7,7
	      S31.416,26,27.557,26z"
        />
      </svg>
      <!-- distance -->
      <svg attr.x="{{distanceToDisplay.X}}" attr.y="{{distanceToDisplay.Y}}" *ngIf="distanceIsVisible">
        <rect x="0" y="0" width="32" height="14" fill="#A00"></rect>
        <text x="4" y="11" font-size="12px" fill="#FFF" style="stroke:#FFF;">
          {{distanceToDisplay.Value}}
        </text>
      </svg>
    </svg>
  </div>
</ion-content>