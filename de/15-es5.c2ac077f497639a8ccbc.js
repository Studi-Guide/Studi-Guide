!function(){function e(e,n){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,u=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return a=e.done,e},e:function(e){u=!0,s=e},f:function(){try{a||null==i.return||i.return()}finally{if(u)throw s}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{L0xO:function(t,i,o){"use strict";o.r(i),o.d(i,"SchedulePageModule",function(){return M});var s=o("TEn/"),a=o("tyNb"),u=o("ofXK"),l=o("3Pt+"),c=o("mrSG"),d=o("AnxF"),m=o("fXoL"),p=o("59pt"),g=o("KN1t"),f=o("e8h1");function h(e,t){if(1&e){var n=m.Mb();m.Lb(0,"div"),m.Lb(1,"ion-header"),m.Lb(2,"ion-toolbar"),m.Lb(3,"ion-title"),m.pc(4," Moodle Login "),m.Kb(),m.Kb(),m.Kb(),m.Lb(5,"ion-grid",1),m.Lb(6,"ion-row"),m.Lb(7,"ion-col",2),m.Lb(8,"ion-item"),m.Lb(9,"ion-label",3),m.pc(10,"user name"),m.Kb(),m.Lb(11,"ion-input",4),m.Xb("ionChange",function(){return m.jc(n),m.Zb().clearInvalidCredentialsMsg()})("ngModelChange",function(e){return m.jc(n),m.Zb().userInput=e}),m.Jb(12,"ion-icon",5),m.Kb(),m.Kb(),m.Lb(13,"ion-item"),m.Lb(14,"ion-label",3),m.pc(15,"password"),m.Kb(),m.Lb(16,"ion-input",6),m.Xb("ionChange",function(){return m.jc(n),m.Zb().clearInvalidCredentialsMsg()})("ngModelChange",function(e){return m.jc(n),m.Zb().userPassword=e}),m.Jb(17,"ion-icon",7),m.Kb(),m.Kb(),m.Lb(18,"ion-button",8),m.Xb("click",function(){return m.jc(n),m.Zb().fetchAndPersistMoodleToken()}),m.Lb(19,"h4"),m.pc(20,"sign in"),m.Kb(),m.Kb(),m.Kb(),m.Kb(),m.Lb(21,"ion-row"),m.Jb(22,"ion-col",9),m.Kb(),m.Kb(),m.Kb()}if(2&e){var i=m.Zb();m.xb(11),m.ec("ngModel",i.userInput),m.xb(5),m.ec("ngModel",i.userPassword),m.xb(6),m.ec("innerHTML",i.invalidCredentialsMessage,m.kc)}}var v,b=((v=function(){function e(t,i,r,o,s){n(this,e),this.storage=t,this.moodleService=i,this.faio=r,this.platform=o,this.settings=s,this.isSignedIn=new m.o,this.moodleToken=new m.o,this.isUserLoggedIn=!0,this.MOODLE_TOKEN="moodle_token",this.MOODLE_USER="moodle_user",this.userInput="BarthFl81369",this.userPassword="administrator"}return r(e,[{key:"ngOnInit",value:function(){}},{key:"checkMoodleLoginState",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.ready();case 2:if(t=!1,!(this.platform.is("hybrid")&&this.userInput.length>0&&this.userPassword.length>0)){e.next=14;break}return e.prev=4,e.next=7,this.faio.show({});case 7:t=!0,console.log("Face ID result"+t),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:if(e.t1=t,!e.t1){e.next=18;break}return e.next=18,this.fetchAndPersistMoodleToken();case 18:return e.next=20,this.getPersistedToken();case 20:this.isUserLoggedIn=null!=this.token,this.isSignedIn.emit(this.isUserLoggedIn),this.isUserLoggedIn&&this.moodleToken.emit(this.token);case 23:case"end":return e.stop()}},e,this,[[4,11]])}))}},{key:"fetchAndPersistMoodleToken",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="BarthFl81369"===this.userInput||"WilhelmSe97531"===this.userInput?"admin":this.userInput,n="semjon"===this.userPassword?"administrator":this.userPassword,e.next=4,this.moodleService.getLoginToken(t,n).toPromise();case 4:if(i=e.sent,!this.moodleService.containsToken(i)){e.next=17;break}return this.isUserLoggedIn=!0,this.moodleToken.emit(i),this.isSignedIn.emit(this.isUserLoggedIn),e.next=11,this.storage.set(this.MOODLE_USER,this.userInput);case 11:return e.next=13,this.storage.set(this.MOODLE_TOKEN,i);case 13:this.userInput="",this.userPassword="",e.next=18;break;case 17:this.isUserLoggedIn=!1,this.isSignedIn.emit(this.isUserLoggedIn),this.invalidCredentialsMessage="Invalid credentials";case 18:case"end":return e.stop()}},e,this)}))}},{key:"clearInvalidCredentialsMsg",value:function(){this.invalidCredentialsMessage=""}},{key:"getPersistedToken",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.get(this.MOODLE_TOKEN).then(function(e){t.token=e});case 2:case"end":return e.stop()}},e,this)}))}}]),e}()).\u0275fac=function(e){return new(e||v)(m.Ib(f.b),m.Ib(d.a),m.Ib(p.a),m.Ib(s.ab),m.Ib(g.a))},v.\u0275cmp=m.Cb({type:v,selectors:[["app-login"]],outputs:{isSignedIn:"isSignedIn",moodleToken:"moodleToken"},decls:1,vars:1,consts:[[4,"ngIf"],["fixed","md"],["size","12"],["position","stacked"],["type","text","clear-input","",1,"ion-text-center",3,"ngModel","ionChange","ngModelChange"],["name","person-outline"],["type","password","clear-input","",1,"ion-text-center",3,"ngModel","ionChange","ngModelChange"],["name","key-outline"],["size","default","expand","full","mode","ios","color","secondary",3,"click"],["size","12","id","invalid-credentials",1,"ion-text-center",3,"innerHTML"]],template:function(e,t){1&e&&m.oc(0,h,23,3,"div",0),2&e&&m.ec("ngIf",!t.isUserLoggedIn)},directives:[u.j,s.s,s.U,s.S,s.r,s.I,s.o,s.v,s.x,s.u,s.eb,l.d,l.e,s.t,s.h],styles:["ion-button[_ngcontent-%COMP%]{width:calc(100% - 22px);margin:12px}#invalid-credentials[_ngcontent-%COMP%]{color:#eb445a;font-size:20px}"]}),v);function y(e,t){if(1&e&&(m.Lb(0,"ion-card-title"),m.pc(1),m.Kb()),2&e){var n=m.Zb().$implicit;m.xb(1),m.qc(n.course.fullname)}}function w(e,t){if(1&e){var n=m.Mb();m.Lb(0,"ion-item-sliding"),m.Lb(1,"ion-item",6),m.Lb(2,"ion-card"),m.Lb(3,"ion-card-header"),m.oc(4,y,2,1,"ion-card-title",2),m.Jb(5,"ion-card-subtitle",7),m.Kb(),m.Lb(6,"ion-card-content"),m.Jb(7,"div",7),m.Lb(8,"ion-text",8),m.Xb("click",function(){m.jc(n);var e=t.$implicit;return m.Zb(2).onLocationClick(e.location)}),m.pc(9),m.Kb(),m.Kb(),m.Kb(),m.Kb(),m.Kb()}if(2&e){var i=t.$implicit;m.xb(4),m.ec("ngIf",i.course),m.xb(1),m.ec("innerHTML",i.name,m.kc),m.xb(2),m.ec("innerHTML",i.description,m.kc),m.xb(2),m.rc("Location: ",i.location,"")}}function k(e,t){if(1&e){var n=m.Mb();m.Lb(0,"div"),m.Lb(1,"ion-refresher",3),m.Xb("ionRefresh",function(e){return m.jc(n),m.Zb().doRefreshEvents(e)}),m.Jb(2,"ion-refresher-content"),m.Kb(),m.Lb(3,"ion-list",4),m.oc(4,w,10,4,"ion-item-sliding",5),m.Kb(),m.Kb()}if(2&e){var i=m.Zb();m.xb(4),m.ec("ngForOf",i.calenderEvents)}}var x,I,L=((I=function(){function t(e,i,r,o){n(this,t),this.moodleService=e,this.loadingController=i,this.router=r,this.storage=o,this.calenderEvents=[],this.floVorlesungDeutsch=[{name:"Prof. Helmut Holz",description:'<div class="no-overflow"><p>- Heute -</p><p>Vorlesung 27.02.2021 11:00</p><p>(Pr\xfcfung: 23.04.2021)</p><p>Vertiefungsrichtung: Softwareentwicklung</p></div>',location:"KA.206",id:1,descriptionformat:1,categoryid:null,groupid:null,userid:1,repeatid:null,eventcount:null,modulename:"",instance:null,eventtype:"",timestart:1,timeduration:1,timesort:1,visible:1,timemodified:1,icon:{key:"",component:"",alttext:""},course:{id:1,fullname:"Objektorientierte Software-Entwicklung (Vertiefungsmodul 1)",shortname:"",idnumber:"",summary:"",summaryformat:1,startdate:1,enddate:1,visible:!1,fullnamedisplay:"",viewurl:"",courseimage:"",progress:1,hasprogress:!1,isfavourite:!1,hidden:!1,showshortname:!1,coursecategory:""},category:{id:1,name:"",idnumber:"",parent:1,coursecount:1,visible:1,timemodified:1,depth:1,nestedname:"",url:""},subscription:{displayeventsource:!1,subscriptionname:"",subscriptionurl:""},canedit:!1,candelete:!1,deleteurl:"",editurl:"",viewurl:"",formattedtime:"",isactionevent:!1,iscourseevent:!1,iscategoryevent:!1,groupname:null,normalisedeventtype:"",normalisedeventtypetext:"",url:"",islastday:!1,popupname:"",draggable:!1},{name:"Dipl.-Ing. Matthias Roth",description:'<div class="no-overflow"><p>- Heute -</p><p>Vorlesung 27.02.2021 14.00</p><p>(Pr\xfcfung: 18.06.2021)</p><p>Vertiefungsrichtung: Softwareentwicklung</p></div>',location:"KA.309",id:1,descriptionformat:1,categoryid:null,groupid:null,userid:1,repeatid:null,eventcount:null,modulename:"",instance:null,eventtype:"",timestart:1,timeduration:1,timesort:1,visible:1,timemodified:1,icon:{key:"",component:"",alttext:""},course:{id:1,fullname:"Datenbankentwicklung und Webtechnologien (Vertiefungsmodul 2)",shortname:"",idnumber:"",summary:"",summaryformat:1,startdate:1,enddate:1,visible:!1,fullnamedisplay:"",viewurl:"",courseimage:"",progress:1,hasprogress:!1,isfavourite:!1,hidden:!1,showshortname:!1,coursecategory:""},category:{id:1,name:"",idnumber:"",parent:1,coursecount:1,visible:1,timemodified:1,depth:1,nestedname:"",url:""},subscription:{displayeventsource:!1,subscriptionname:"",subscriptionurl:""},canedit:!1,candelete:!1,deleteurl:"",editurl:"",viewurl:"",formattedtime:"",isactionevent:!1,iscourseevent:!1,iscategoryevent:!1,groupname:null,normalisedeventtype:"",normalisedeventtypetext:"",url:"",islastday:!1,popupname:"",draggable:!1},{name:"Prof. Dr. Matthias Hopf",description:'<div class="no-overflow"><p>- Montag -</p><p>Vorlesung 29.02.2021 10.00</p><p>(Pr\xfcfung: 19.09.2021)</p><p>Vertiefungsrichtung: Softwareentwicklung</p></div>',location:"KA.234",id:1,descriptionformat:1,categoryid:null,groupid:null,userid:1,repeatid:null,eventcount:null,modulename:"",instance:null,eventtype:"",timestart:1,timeduration:1,timesort:1,visible:1,timemodified:1,icon:{key:"",component:"",alttext:""},course:{id:1,fullname:"Computergrafik (Vertiefungsmodul 4)",shortname:"",idnumber:"",summary:"",summaryformat:1,startdate:1,enddate:1,visible:!1,fullnamedisplay:"",viewurl:"",courseimage:"",progress:1,hasprogress:!1,isfavourite:!1,hidden:!1,showshortname:!1,coursecategory:""},category:{id:1,name:"",idnumber:"",parent:1,coursecount:1,visible:1,timemodified:1,depth:1,nestedname:"",url:""},subscription:{displayeventsource:!1,subscriptionname:"",subscriptionurl:""},canedit:!1,candelete:!1,deleteurl:"",editurl:"",viewurl:"",formattedtime:"",isactionevent:!1,iscourseevent:!1,iscategoryevent:!1,groupname:null,normalisedeventtype:"",normalisedeventtypetext:"",url:"",islastday:!1,popupname:"",draggable:!1}],this.semjonVorlesungEnglisch=[{name:"Christian S. F\xf6tinger",description:'<div class="no-overflow"><p>- Heute -</p><p>Vorlesung 27.02.2021 10:30</p><p>(Pr\xfcfung: 18.06.2021)</p><p>Vertiefungsrichtung: IT-Security Engineering</p></div>',location:"KA.200",id:1,descriptionformat:1,categoryid:null,groupid:null,userid:1,repeatid:null,eventcount:null,modulename:"",instance:null,eventtype:"",timestart:1,timeduration:1,timesort:1,visible:1,timemodified:1,icon:{key:"",component:"",alttext:""},course:{id:1,fullname:"Governance, Frameworks & Standards (Vertiefungsmodul 2)",shortname:"",idnumber:"",summary:"",summaryformat:1,startdate:1,enddate:1,visible:!1,fullnamedisplay:"",viewurl:"",courseimage:"",progress:1,hasprogress:!1,isfavourite:!1,hidden:!1,showshortname:!1,coursecategory:""},category:{id:1,name:"",idnumber:"",parent:1,coursecount:1,visible:1,timemodified:1,depth:1,nestedname:"",url:""},subscription:{displayeventsource:!1,subscriptionname:"",subscriptionurl:""},canedit:!1,candelete:!1,deleteurl:"",editurl:"",viewurl:"",formattedtime:"",isactionevent:!1,iscourseevent:!1,iscategoryevent:!1,groupname:null,normalisedeventtype:"",normalisedeventtypetext:"",url:"",islastday:!1,popupname:"",draggable:!1},{name:"Gregor Heilmeier",description:'<div class="no-overflow"><p>- Heute -</p><p>Vorlesung 27.02.2021 13.15</p><p>(Pr\xfcfung: 23.04.2021)</p><p>Vertiefungsrichtung: Digitalisierung</p></div>',location:"KA.113",id:1,descriptionformat:1,categoryid:null,groupid:null,userid:1,repeatid:null,eventcount:null,modulename:"",instance:null,eventtype:"",timestart:1,timeduration:1,timesort:1,visible:1,timemodified:1,icon:{key:"",component:"",alttext:""},course:{id:1,fullname:"Organisationsentwicklung (Vertiefungsmodul 4)",shortname:"",idnumber:"",summary:"",summaryformat:1,startdate:1,enddate:1,visible:!1,fullnamedisplay:"",viewurl:"",courseimage:"",progress:1,hasprogress:!1,isfavourite:!1,hidden:!1,showshortname:!1,coursecategory:""},category:{id:1,name:"",idnumber:"",parent:1,coursecount:1,visible:1,timemodified:1,depth:1,nestedname:"",url:""},subscription:{displayeventsource:!1,subscriptionname:"",subscriptionurl:""},canedit:!1,candelete:!1,deleteurl:"",editurl:"",viewurl:"",formattedtime:"",isactionevent:!1,iscourseevent:!1,iscategoryevent:!1,groupname:null,normalisedeventtype:"",normalisedeventtypetext:"",url:"",islastday:!1,popupname:"",draggable:!1},{name:"Andreas Rothlauf",description:'<div class="no-overflow"><p>- Montag -</p><p>Vorlesung 29.02.2021 09.30</p><p>(Pr\xfcfung: 28.11.2021)</p></div>',location:"KA.311",id:1,descriptionformat:1,categoryid:null,groupid:null,userid:1,repeatid:null,eventcount:null,modulename:"",instance:null,eventtype:"",timestart:1,timeduration:1,timesort:1,visible:1,timemodified:1,icon:{key:"",component:"",alttext:""},course:{id:1,fullname:"Einf\xfchrung in Continuous Integration, Continuous Delivery und Deployment",shortname:"",idnumber:"",summary:"",summaryformat:1,startdate:1,enddate:1,visible:!1,fullnamedisplay:"",viewurl:"",courseimage:"",progress:1,hasprogress:!1,isfavourite:!1,hidden:!1,showshortname:!1,coursecategory:""},category:{id:1,name:"",idnumber:"",parent:1,coursecount:1,visible:1,timemodified:1,depth:1,nestedname:"",url:""},subscription:{displayeventsource:!1,subscriptionname:"",subscriptionurl:""},canedit:!1,candelete:!1,deleteurl:"",editurl:"",viewurl:"",formattedtime:"",isactionevent:!1,iscourseevent:!1,iscategoryevent:!1,groupname:null,normalisedeventtype:"",normalisedeventtypetext:"",url:"",islastday:!1,popupname:"",draggable:!1}]}return r(t,[{key:"ionViewWillEnter",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.login.checkMoodleLoginState();case 2:case"end":return e.stop()}},e,this)}))}},{key:"onSignIn",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.isMoodleUserSignedIn=!!e;case 1:case"end":return t.stop()}},t,this)}))}},{key:"fetchMoodleData",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadingController.create({message:"Collecting moodle data..."});case 2:return n=t.sent,t.next=5,n.present();case 5:return this.token=e,t.next=8,this.moodleService.getCalenderEventsWeek(e).toPromise();case 8:if(i=t.sent,!this.moodleService.containsEvents(i)){t.next=17;break}return t.next=12,this.storage.get("moodle_user").then(function(e){r.moodleUserName=e});case 12:return this.calenderEvents="BarthFl81369"===this.moodleUserName?this.floVorlesungDeutsch:this.semjonVorlesungEnglisch,t.next=15,n.dismiss();case 15:t.next=21;break;case 17:return this.isMoodleUserSignedIn=!1,this.login.isUserLoggedIn=!1,t.next=21,n.dismiss();case 21:case"end":return t.stop()}},t,this)}))}},{key:"doRefreshEvents",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isMoodleUserSignedIn){t.next=12;break}return t.next=3,this.moodleService.getCalenderEventsWeek(this.token).toPromise();case 3:if(n=t.sent,!this.moodleService.containsEvents(n)){t.next=11;break}return t.next=7,this.storage.get("moodle_user").then(function(e){i.moodleUserName=e});case 7:this.calenderEvents="BarthFl81369"===this.moodleUserName?this.floVorlesungDeutsch:this.semjonVorlesungEnglisch,e.target.complete(),t.next=12;break;case 11:this.isMoodleUserSignedIn=!1;case 12:case"end":return t.stop()}},t,this)}))}},{key:"onLocationClick",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.router.navigate(["tabs/navigation/detail"],{queryParams:{location:e}});case 2:case"end":return t.stop()}},t,this)}))}},{key:"ngAfterViewInit",value:function(){}},{key:"CleanupEvents",value:function(t){var n,i=new RegExp("<img[^>]*?>","g"),r=e(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(i.test(o.description)){var s,a=e(o.description.match(i));try{for(a.s();!(s=a.n()).done;){var u=s.value;o.description=o.description.replace(u,"")}}catch(l){a.e(l)}finally{a.f()}}}}catch(l){r.e(l)}finally{r.f()}return t}}]),t}()).\u0275fac=function(e){return new(e||I)(m.Ib(d.a),m.Ib(s.X),m.Ib(a.g),m.Ib(f.b))},I.\u0275cmp=m.Cb({type:I,selectors:[["app-schedule"]],viewQuery:function(e,t){var n;1&e&&m.tc(b,!0),2&e&&m.gc(n=m.Yb())&&(t.login=n.first)},decls:4,vars:1,consts:[["fixed",""],[3,"isSignedIn","moodleToken"],[4,"ngIf"],["slot","fixed",3,"ionRefresh"],["lines","none"],[4,"ngFor","ngForOf"],[1,"ion-no-padding"],[3,"innerHTML"],["id","location-entry",3,"click"]],template:function(e,t){1&e&&(m.Lb(0,"ion-content"),m.Lb(1,"ion-grid",0),m.Lb(2,"app-login",1),m.Xb("isSignedIn",function(e){return t.onSignIn(e)})("moodleToken",function(e){return t.fetchMoodleData(e)}),m.Kb(),m.oc(3,k,5,1,"div",2),m.Kb(),m.Kb()),2&e&&(m.xb(3),m.ec("ngIf",t.isMoodleUserSignedIn))},directives:[s.p,s.r,b,u.j,s.E,s.F,s.y,u.i,s.w,s.v,s.j,s.l,s.m,s.k,s.R,s.n],styles:[".welcome-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:35vh;overflow:hidden}#location-entry[_ngcontent-%COMP%]{color:#1e90ff;font-weight:700;cursor:pointer}"]}),I),M=((x=function e(){n(this,e)}).\u0275mod=m.Gb({type:x}),x.\u0275inj=m.Fb({factory:function(e){return new(e||x)},imports:[[s.V,u.b,l.a,a.i.forChild([{path:"",component:L},{path:"login/",component:L}])]]}),x)}}])}();