(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"7wo0":function(e,o,t){"use strict";t.r(o),t.d(o,"SettingsPageModule",function(){return m});var i=t("TEn/"),n=t("tyNb"),a=t("ofXK"),s=t("3Pt+"),r=t("mrSG"),l=t("AnxF"),c=t("KN1t"),b=t("YD5U"),d=t("fXoL"),g=t("e8h1");const u=["DrawerDockingToggle"];function h(e,o){if(1&e){const e=d.Mb();d.Lb(0,"ion-select",31),d.Xb("ionChange",function(){return d.jc(e),d.Zb().logoutFromMoodle()}),d.Lb(1,"ion-select-option",32),d.pc(2,"sign out"),d.Kb(),d.Kb()}if(2&e){const e=d.Zb();d.ec("interfaceOptions",e.actionSheetOptions)}}let f=(()=>{class e{constructor(e,o,t){this.storage=e,this.moodleService=o,this.settingsModel=t,this.MOODLE_TOKEN="moodle_token",this.MOODLE_USER="moodle_user",this.actionSheetOptions={header:"Moodle"}}ngAfterViewInit(){this.drawerDockingToggle.checked=this.settingsModel.DrawerDocking}ionViewWillEnter(){return Object(r.a)(this,void 0,void 0,function*(){this.storage.ready().then(()=>Object(r.a)(this,void 0,void 0,function*(){if(yield this.isMoodleTokenPersisted()){const e=yield this.moodleService.getCalenderEventsWeek(this.persistedMoodleToken).toPromise();if(this.moodleService.containsEvents(e))return this.isSignedIn=!0,void(yield this.getMoodleUserName())}this.setLoggedOutFromMoodle()}))})}logoutFromMoodle(){return Object(r.a)(this,void 0,void 0,function*(){yield this.storage.remove(this.MOODLE_USER).then(()=>{this.storage.remove(this.MOODLE_TOKEN).then(()=>{this.setLoggedOutFromMoodle()})})})}isMoodleTokenPersisted(){return Object(r.a)(this,void 0,void 0,function*(){return yield this.storage.get(this.MOODLE_TOKEN).then(e=>(this.persistedMoodleToken=e,null!=this.persistedMoodleToken))})}setLoggedOutFromMoodle(){this.isSignedIn=!1,this.moodleUserName="No user signed in."}getMoodleUserName(){return Object(r.a)(this,void 0,void 0,function*(){yield this.storage.get(this.MOODLE_USER).then(e=>{this.moodleUserName=e})})}onDrawerDockingToggleChange(e){this.settingsModel.DrawerDocking=e.detail.checked,b.a.DrawerDocking=this.settingsModel.DrawerDocking}}return e.\u0275fac=function(o){return new(o||e)(d.Ib(g.b),d.Ib(l.a),d.Ib(c.a))},e.\u0275cmp=d.Cb({type:e,selectors:[["app-settings"]],viewQuery:function(e,o){if(1&e&&d.tc(u,!0),2&e){let e;d.gc(e=d.Yb())&&(o.drawerDockingToggle=e.first)}},decls:48,vars:3,consts:function(){let e,o,t,i,n;return e="\n      Einstellungen\n    ",o="\n      " + "\ufffd#21\ufffd" + "Sprache" + "\ufffd/#21\ufffd" + "\n      " + "\ufffd#22\ufffd" + "Deutsch" + "\ufffd/#22\ufffd" + "\n    ",t="Hilfe",i="\xDCber Uns",n="Drawer einrasten",[e,[1,"padding"],["lines","none"],[3,"routerLink"],["slot","start"],["size","large","name","person-circle-sharp"],[3,"innerHTML"],["selected-text","","interface","action-sheet","mode","ios",3,"interfaceOptions","ionChange",4,"ngIf"],["lines","",1,"ion-padding-top","ion-margin-top"],["routerLink","language"],o,["slot","end"],["href","#"],["slot","end","color","dark","name","help-circle-outline"],t,["href","https://github.com/Studi-Guide","target","_blank"],["slot","end","color","dark","name","information-circle-outline"],i,["slot","end","color","dark","name","information-circle-outline","data-tooltip","Einrasten der Schublade Ein-/Ausschalten","data-tooltip-pos","left center"],n,[3,"ionChange"],["DrawerDockingToggle",""],[1,"ion-justify-content-center"],["size","large","name","logo-android","data-tooltip","Android","data-tooltip-pos","left center"],["size","large","name","logo-apple","data-tooltip","Apple","data-tooltip-pos","center top"],["size","large","name","logo-tux","data-tooltip","Linux","data-tooltip-pos","center bottom"],["size","large","name","logo-windows","data-tooltip","Windows"],["size","large","name","logo-firefox","data-tooltip","Firefox","data-tooltip-pos","center bottom"],["size","large","name","logo-chrome","data-tooltip","Chrome"],["size","large","name","logo-electron","data-tooltip","Electron","data-tooltip-pos","center bottom"],["size","large","name","logo-ionic","data-tooltip","Ionic","data-tooltip-pos","right center"],["selected-text","","interface","action-sheet","mode","ios",3,"interfaceOptions","ionChange"],["id","moodle-logout","value","sign-out","selected-text",""]]},template:function(e,o){1&e&&(d.Lb(0,"ion-header"),d.Lb(1,"ion-toolbar"),d.Lb(2,"ion-title"),d.Pb(3,0),d.Kb(),d.Kb(),d.Kb(),d.Lb(4,"ion-content"),d.Lb(5,"div",1),d.Lb(6,"ion-list-header"),d.pc(7,"Accounts"),d.Kb(),d.Lb(8,"ion-list",2),d.Lb(9,"ion-item",3),d.Lb(10,"ion-avatar",4),d.Jb(11,"ion-icon",5),d.Kb(),d.Lb(12,"ion-label"),d.Lb(13,"h3"),d.pc(14,"Moodle"),d.Kb(),d.Jb(15,"p",6),d.Kb(),d.oc(16,h,3,1,"ion-select",7),d.Kb(),d.Kb(),d.Kb(),d.Jb(17,"hr"),d.Lb(18,"ion-list",8),d.Lb(19,"ion-item",9),d.Sb(20,10),d.Jb(21,"ion-label"),d.Jb(22,"ion-note",11),d.Qb(),d.Kb(),d.Lb(23,"ion-item",12),d.Jb(24,"ion-icon",13),d.Lb(25,"ion-label"),d.Pb(26,14),d.Kb(),d.Kb(),d.Lb(27,"ion-item",15),d.Jb(28,"ion-icon",16),d.Lb(29,"ion-label"),d.Pb(30,17),d.Kb(),d.Kb(),d.Lb(31,"ion-item"),d.Jb(32,"ion-icon",18),d.Lb(33,"ion-label"),d.Pb(34,19),d.Kb(),d.Lb(35,"ion-toggle",20,21),d.Xb("ionChange",function(e){return o.onDrawerDockingToggleChange(e)}),d.Kb(),d.Kb(),d.Kb(),d.Kb(),d.Lb(37,"ion-footer"),d.Lb(38,"ion-grid"),d.Lb(39,"ion-row",22),d.Jb(40,"ion-icon",23),d.Jb(41,"ion-icon",24),d.Jb(42,"ion-icon",25),d.Jb(43,"ion-icon",26),d.Jb(44,"ion-icon",27),d.Jb(45,"ion-icon",28),d.Jb(46,"ion-icon",29),d.Jb(47,"ion-icon",30),d.Kb(),d.Kb(),d.Kb()),2&e&&(d.xb(9),d.fc("routerLink",o.isSignedIn?"/tabs/settings":"/tabs/schedule"),d.xb(6),d.ec("innerHTML",o.moodleUserName,d.kc),d.xb(1),d.ec("ngIf",o.isSignedIn))},directives:[i.v,i.V,i.T,i.p,i.C,i.B,i.y,i.cb,n.h,i.e,i.w,i.A,a.j,i.D,i.U,i.a,i.t,i.u,i.J,i.L,i.db,i.M],styles:[""]}),e})(),p=(()=>{class e{constructor(e,o){this.router=e,this.locale=o,this.languages=[{Language:"English",Identifier:"en-US"},{Language:"German",Identifier:"de"}]}ngOnInit(){console.log(this.router.url,this.locale)}SelectLanguageClick(e){console.log(e),e!==this.locale?this.router.navigate(["/"+e+this.router.url]):console.log("locale",this.locale,"not found in current URL")}}return e.\u0275fac=function(o){return new(o||e)(d.Ib(n.g),d.Ib(d.v))},e.\u0275cmp=d.Cb({type:e,selectors:[["detail-view-select-language"]],decls:11,vars:0,consts:function(){let e,o;return e="Sprache w\xE4hlen",o="\n    " + "\ufffd#9\ufffd" + "Englisch" + "[\ufffd/#9\ufffd|\ufffd/#10\ufffd]" + "\n    " + "\ufffd#10\ufffd" + "Deutsch" + "[\ufffd/#9\ufffd|\ufffd/#10\ufffd]" + "\n  ",o=d.Rb(o),[["translucent",""],["slot","start"],["defaultHref","/"],e,o,["href","/en"],["href","/de"]]},template:function(e,o){1&e&&(d.Lb(0,"ion-header",0),d.Lb(1,"ion-toolbar"),d.Lb(2,"ion-buttons",1),d.Jb(3,"ion-back-button",2),d.Kb(),d.Lb(4,"ion-title"),d.Pb(5,3),d.Kb(),d.Kb(),d.Kb(),d.Lb(6,"ion-content"),d.Lb(7,"ion-list"),d.Sb(8,4),d.Jb(9,"ion-item",5),d.Jb(10,"ion-item",6),d.Qb(),d.Kb(),d.Kb())},directives:[i.v,i.V,i.i,i.f,i.g,i.T,i.p,i.B,i.y],styles:[""]}),e})(),L=(()=>{class e{}return e.\u0275mod=d.Gb({type:e}),e.\u0275inj=d.Fb({factory:function(o){return new(o||e)},imports:[[a.b,i.W]]}),e})(),m=(()=>{class e{}return e.\u0275mod=d.Gb({type:e}),e.\u0275inj=d.Fb({factory:function(o){return new(o||e)},imports:[[i.W,a.b,s.a,n.i.forChild([{path:"",component:f},{path:"language",component:p}]),L]]}),e})()}}]);